ARG BASE_IMAGE
ARG INSTALL_DIR=/opt/LightGBM

# hadolint ignore=DL3006
FROM ${BASE_IMAGE}

COPY LightGBM/lib_lightgbm.so ${INSTALL_DIR}/lib_lightgbm.so
COPY LightGBM/LICENSE ${INSTALL_DIR}/LICENSE
COPY LightGBM/python-package ${INSTALL_DIR}/python-package
COPY LightGBM/VERSION.txt ${INSTALL_DIR}/VERSION.txt

RUN cd "${INSTALL_DIR}/python-package" && \
    python setup.py install --precompile && \
    cd /opt && \
    rm -rf "${INSTALL_DIR}"
